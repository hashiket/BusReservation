{% extends 'Busapp/base.html' %}
{% load static %}

{% block content %}

<br>
  <div class="container">
    <h3>Find the bus</h3>
    <form class="" action="find" method="post">
      {% csrf_token %}

      {% if buses %}
      {% for bu in buses %}

      {% if bu.Bus_ID == a %}
        <div class="row">
          <div class="col-md-3">
            From:<input type="text" class="form-control row-md-4" id="source" name="source" placeholder="From" value="{{bu.Source}}" required>
          </div>
          <div class="col-md-3">
            To:<input type="text" class="form-control" id="destination" name="destination" placeholder="To" value="{{bu.Destination}}" required>
          </div>
          <div class="col-md-3">
            Date:<input type="date"class="form-control" id="date" name="date" placeholder="DD-MM-YYYY" value="{{date}}" required>
          </div>
          <div class="col-md-1">
            .<input type="submit" class="form-control btn btn-dark" name="" value="Find">
          </div>

        </div>
      {% endif %}

      {% endfor %}
      {% else %}
      <!--  From:<input type="text" id="source" name="source" placeholder="From" value="{{source}}" required>    To:<input type="text" id="destination" name="destination" placeholder="To" value="{{destination}}" required>    Date:<input type="date" id="date" name="date" placeholder="YYYY-MM-DD"  value="{{date}}" required> <input type="submit" name="" class="btn btn-dark" value="Find">-->

        <div class="row">
          <div class="col-md-3">
            From:<input type="text" class="form-control row-md-4" id="source" name="source" placeholder="From" value="{{source}}" required>
          </div>
          <div class="col-md-3">
            To:<input type="text" class="form-control" id="destination" name="destination" placeholder="To" value="{{destination}}" required>
          </div>
          <div class="col-md-3">
            Date:<input type="date"class="form-control" id="date" name="date" placeholder="DD-MM-YYYY" value="{{date}}" required>
          </div>
          <div class="col-md-1">
            .<input type="submit" class="form-control btn btn-dark" name="" value="Find">
          </div>

        </div>
      {% endif %}
    </form>
  </div>

<br>
  <div class="container">
   <table>
    {% if buses  %}
     <tr>
       <th>Bus</th>
       <th>Reg. No.</th>
       <th>Location</th>
       <th>Destination</th>
       <th>No.of Seats</th>
       <th>Avai.seats</th>
       <th>Departure</th>
       <th>Reaching</th>
       <th>Price/seat</th>
       <th>View</th>
     </tr>
      {% for bu in buses %}
      {% if bu.Status %}
      <tr style="background-color:#e7fcc0">
        <td id="busname">{{bu.Bus_name}}</td>
        <td id="regno">{{bu.Reg_No}}</td>
        <td id="source">{{bu.Source}}</td>
        <td id="destination">{{bu.Destination}}</td>
        <td id="seats">{{bu.No_Seats}}</td>
        <td>{{bu.Av_Se}}</td>
        <td>{{bu.Deap_time}}</td>
        <td>{{bu.Reach_time}}</td>
        <td>{{bu.rate}}</td>
        <td>
          <form  action="bookseat" method="POST">
          {% csrf_token %}

          <input type="hidden" name="bus_id" value={{bu.Bus_ID}}>
          <button type="submit" class="btn btn-dark" name="status" value="" >BookSeat</button>
         </form>
        </td>
      </tr>
      {% endif %}
      {% endfor %}
     {% else %}
     <tr>
       <th>Buses are not available on this route...</th>
     </tr>
     {% endif %}
    </table>
    </div>



<!--    <div class="container" >
      <form  action="reservations" method="POST">
        {% csrf_token %}
        <h1>Reservation</h1>
  <!--      <input type="text" name="location" placeholder="Enter Location"><br>
        <input type="text" name="destination" placeholder="Enter Destination"><br>-->
    <!--    <label for="">Username:</label>
        <input type="text" id="username" name="username" placeholder="Enter your username"><br>
        <label for="time">Time  :</label>
        <input type="time" id="time" name="time" placeholder="time"><br>
        <label for="date">Date  :</label>
        <input type="date" id="date" name="date" value=""><br>
        <label for="number">Seats  :</label>
        <input type="number" id="number" name="no_seats" placeholder="Enter no of seats"><br>
        <label for="regno"> Reg No.:</label>
        <input type="number" name="regno" placeholder="Enter bus reg no."><br>
        <label for="st">Seat no.:</label>
        <input type="int" name="st" placeholder="Enter seat no."><br>

        <input type="submit"  value="Submit">
      </form>

    </div>

    <h1>Your Reservations are:</h1>
    <div class="container">
      <table>


      <tr>
        <th>Bus</th>
        <th>Reg. No.</th>
        <th>Location</th>
        <th>Destination</th>
        <th>No.of Seats</th>
      </tr>
      {% for bu in bus %}
      <tr>
        <td>{{bu.Bus_name}}</td>
        <td>{{bu.Reg_No}}</td>
        <td>{{bu.Source}}</td>
        <td>{{bu.Destination}}</td>
        <td>{{bu.No_Seats}}</td>
      </tr>
      {% endfor %}
      </table>
    </div>-->

<!--    {% if id != Null %}
    <div class="container" >
    <form  action="reservations" method="POST">
      {% csrf_token %}
      <h1>Reservation</h1>

    <!--      <p class="text">
       You have selected <span id="count" name="no_seats">0</span> seats for a price of <span id="total">0</span>
      You have selected <button type="integer"  id="count" name="no_seats">0</button> seats-->
    <!--      <span ><input id="count" type="text" placeholder="I'm in a span"></input></span>


          <span id="count">0</span>
      <p id="seatno"></p>
      <p id="no"></p>
    <!--          <button type="number" name="button" id="count">0</button>
      </p>-->

    <!--  <input type="text" id="username" name="username" placeholder="Enter your username"><br>-->
  <!--    <label for="time">Time  :</label>
      <input type="time" id="time" name="time" placeholder="time"><br>
      <label for="date">Date  :</label>
      <input type="date" id="date" name="date" value=""><br>
      <label for="regno"> Reg No.:</label>
      <input type="number" name="regno" placeholder="Enter bus reg no." value="{{id}}"><br>
      <label for="number">Seats  :</label>
      <input type="number" id="count" name="no_seats" placeholder="Enter no of seats" value=""><br>
      <label for="st">Seat no.:</label>
      <input type="int" name="st" placeholder="Enter seat no."><br>

      <input type="submit"  value="Submit">



    <!--      <input type="text" name="location" placeholder="Enter Location"><br>
        <input type="text" name="destination" placeholder="Enter Destination"><br>-->

    <!--  </form>

    </div>-->

  {% endif %}
{% endblock %}
